# Vercel Deployment
# 
# Note: Vercel automatically deploys from Git pushes via their platform.
# This workflow is optional and can be used for:
# - Running tests before deployment
# - Running linting/type checking
# - Notifications
#
# To deploy to Vercel:
# 1. Connect your GitHub repo to Vercel (vercel.com → Add New Project)
# 2. Configure environment variables in Vercel dashboard
# 3. Push to main branch → Vercel auto-deploys
#
# See DEPLOYMENT.md for detailed instructions

name: Pre-Deployment Checks

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  lint-and-typecheck:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'

    - name: Install dependencies
      run: npm install --legacy-peer-deps

    - name: Generate Prisma Client
      run: npx prisma generate

    - name: Run linting
      run: npm run lint

    - name: Type check
      run: npx tsc --noEmit

    # Optional: Run tests if you add them later
    # - name: Run tests
    #   run: npm test
